<H1>Spark Events</H1>

<details>
  <app-spark-event-filter
    [sparkEventFilter]="sparkEventFilter"
    (sparkEventFilterChange)="reevalFilterChange()" />
</details>

<!-- split container : hauteur pleine page (ajuster 80px si nÃ©cessaire pour header/controls) -->
<div style="display:flex; gap:0; align-items:stretch; height: calc(100vh - 80px); border:1px solid transparent;">

  <!-- Left panel: master (ag-grid) -->
  <div style="overflow:hidden; min-width:200px;" [style.width.px]="leftWidth">
    <ag-grid-angular
        style="width:100%; height:100%;"
        class="ag-theme-alpine"
        (gridReady)="onGridReady($event)"
        [rowData]="rowData"
        [columnDefs]="columnDefs"
        [gridOptions]="gridOptions"
        rowSelection="single">
    </ag-grid-angular>
  </div>

  <!-- divider draggable -->
  <div
    (mousedown)="startDrag($event)"
    style="width:8px; cursor:col-resize; background:#f5f5f5; border-left:1px solid #e6e6e6; border-right:1px solid #e6e6e6;">
  </div>

  <!-- Right panel: detail view -->
  <div style="flex:1 1 0; padding:12px; overflow:auto;">
    @if(selectedEvent) {
      <h3>
        <A [routerLink]="['/event', selectedEvent.eventNum ]">
          SparkEvent {{selectedEvent.eventNum}} Detail
        </A>
      </h3>

      <app-spark-event-detail [sparkEvent]="selectedEvent" />

    } @else {
      <!-- no event selected -->
    }

  </div>

</div>

<button (click)="onClickDump()">Dump</button>
