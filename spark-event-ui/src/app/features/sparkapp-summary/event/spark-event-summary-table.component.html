
@if(filter) {
  <details>
    <div class="container-fluid">
      <div class="row">
        <span>
          Show
          <app-label-checkbox label="App Lifecycle" [(checked)]="filter.acceptAppLifecycleEvents" (checkedChange)="reEvalFilterChange()"/>
          &nbsp;
          <app-label-checkbox label="Pseudo Events" [(checked)]="filter.acceptPseudoEvents" (checkedChange)="reEvalFilterChange()"/>
          &nbsp;
          <app-label-checkbox label="Executor" [(checked)]="filter.acceptExecutorEvents" (checkedChange)="reEvalFilterChange()"/>
        </span>
      </div>
      <div class="row">
        <span>
          Show
          <app-label-checkbox label="Sql" [(checked)]="filter.acceptSqlExecs" (checkedChange)="reEvalFilterChange()"/>
          &nbsp;
          @if (filter.acceptSqlExecs) {
          }
        </span>
      </div>
      <div class="row">
        <span>
          Show
          <app-label-checkbox label="Job" [(checked)]="filter.acceptTopLevelJobExecs" (checkedChange)="reEvalFilterChange()"/>
          &nbsp;
          @if (filter.acceptTopLevelJobExecs) {
          }
        </span>
      </div>

      @if(filter.acceptSqlExecs || filter.acceptTopLevelJobExecs) {
        <div class="row">
          <span>
            Duration(ms) min:
            <input type="number" style="width:80px;" [(ngModel)]="filter.minDurationMs" (ngModelChange)="reEvalFilterChange()"/>
            &nbsp; max:
            <input type="number" style="width:80px;" [(ngModel)]="filter.maxDurationMs" (ngModelChange)="reEvalFilterChange()"/>
            &nbsp;
            CallSite message contains:
            <input type="text" style="width:150px;" [(ngModel)]="filter.callSiteShortMessageContains" (ngModelChange)="reEvalFilterChange()"/>
            but not:
            <input type="text" style="width:150px;" [(ngModel)]="filter.callSiteShortMessageNotContains" (ngModelChange)="reEvalFilterChange()"/>
            &nbsp;
            Detail contains:
            <input type="text" style="width:150px;" [(ngModel)]="filter.callSiteLongMessageContains" (ngModelChange)="reEvalFilterChange()"/>
            but not:
            <input type="text" style="width:150px;" [(ngModel)]="filter.callSiteLongMessageNotContains" (ngModelChange)="reEvalFilterChange()"/>

          </span>
        </div>
      }


    </div>

  </details>
}


<div style="display:flex; gap:0; align-items:stretch; height: calc(100vh - 80px); border:1px solid transparent;">

  <!-- Left panel: master (ag-grid) -->
  <div style="overflow:hidden; min-width:200px;" [style.width.px]="leftWidth">
    <ag-grid-angular
        style="width:100%; height:100%;"
        class="ag-theme-alpine"
        (gridReady)="onGridReady($event)"
        [rowData]="items"
        [columnDefs]="columnDefs"
        [gridOptions]="gridOptions"
        rowSelection="single">
    </ag-grid-angular>
  </div>

  <!-- divider draggable
  <div (mousedown)="startDrag($event)"
    style="width:8px; cursor:col-resize; background:#f5f5f5; border-left:1px solid #e6e6e6; border-right:1px solid #e6e6e6;">
  </div>
  -->

  <!-- Right panel: detail view -->
  <div style="flex:1 1 0; padding:12px; overflow:auto;">
    @if(selected) {
      <h3>
<!--
        <A [routerLink]="['/cluster', selected.clusterName, 'spark-app', selected.sparkAppName, 'summary']">
          cluster {{selected.clusterName}} app:{{selected.sparkAppName}}</A>
-->
      </h3>

      <app-spark-event-summary [model]="selected" />

    } @else {
      <!-- no selected -->
    }

  </div>

</div>
